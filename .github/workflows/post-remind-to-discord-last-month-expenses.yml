name: Discord reminder to check last month expenses

on:
  schedule:
    # æ¯æœˆ1æ—¥ã®9:00ã«èµ·å‹•
    - cron: '0 9 1 * *'

jobs:
  end-of-month-task:
    runs-on: ubuntu-latest
    steps:
      - name: Run task if today is the last day of the month
        run: |
          if [ "$(date +\%d -d tomorrow)" == "01" ]; then
            echo "Running end-of-month tasks."
          else
            echo "Today is not the last day of the month. No action taken."
            exit 1
          fi
      - name: Notify Discord
        run: |
          curl -H "Content-Type: application/json" \
          -X POST \
          -d '{
            "content": "----------\nğŸ¶æ˜æ—¥ã¯å®¶è¨ˆç°¿ç· ã‚æ—¥ï¼ğŸ¶\nå…ˆæœˆåˆ†ã§è¨˜è¼‰å¿˜ã‚Œãƒ»é–“é•ã„ãŒãªã„ã‹ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚\n----------
          }' \
          ${{ secrets.DISCORD_LAST_MONTH_WEBHOOK_URL }}
